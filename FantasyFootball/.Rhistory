#Mergin tables######################################################################################################
#2015 run pass and total defense
runD15 <- data.table(read.csv('2015RunD.txt',sep = "\t"))
passD15 <- data.table(read.csv('2015PassD.txt',sep = "\t"))
totalD15 <- data.table(read.csv('2015TotalD.txt',sep ="\t"))
#merge 2015 stats to one table
runandpass2015 <- merge(runD15,passD15,by="Team")
runandpassandtotal2015 <- merge(runandpass2015 ,totalD15,by="Team")
#2016 run pass and total defense
runD16 <- data.table(read.csv('2016RunD.txt',sep = "\t"))
passD16 <- data.table(read.csv('2016PassD.txt',sep = "\t"))
totalD16 <- data.table(read.csv('2016TotalD.txt',sep ="\t"))
#merge 2015 stats to one table
runandpass2016 <- merge(runD16,passD16,by="Team")
runandpassandtotal2016 <- merge(runandpass2016 ,totalD16,by="Team")
#row bind
finalD <- rbind(runandpassandtotal2015,runandpassandtotal2016,fill=TRUE)
d <- finalD
#####################################################################################################################
#add team ID column names (to cbind using column IDs)
p[,"TeamID"] <- 0
d[,"TeamID"] <- 0
players <- AssignTeamIDs(p)
library(data.table)
source('FFfunctions.R')
#fanduel data http://rotoguru1.com/cgi-bin/fyday.pl?week=1&game=fd&scsv=1
#2015 stats
#read the player FFP tables######################################################################################
w1 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week1.txt', sep = ';',stringsAsFactors = FALSE)
w2 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week2.txt', sep = ';',stringsAsFactors = FALSE)
w3 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week3.txt', sep = ';',stringsAsFactors = FALSE)
w4 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week4.txt', sep = ';',stringsAsFactors = FALSE)
w5 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week5.txt', sep = ';',stringsAsFactors = FALSE)
w6 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week6.txt', sep = ';',stringsAsFactors = FALSE)
w7 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week7.txt', sep = ';',stringsAsFactors = FALSE)
w8 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week8.txt', sep = ';',stringsAsFactors = FALSE)
w9 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week9.txt', sep = ';',stringsAsFactors = FALSE)
w10 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week10.txt', sep = ';',stringsAsFactors = FALSE)
w11 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week11.txt', sep = ';',stringsAsFactors = FALSE)
w12 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week12.txt', sep = ';',stringsAsFactors = FALSE)
w13 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week13.txt', sep = ';',stringsAsFactors = FALSE)
w14 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week14.txt', sep = ';',stringsAsFactors = FALSE)
w15 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week15.txt', sep = ';',stringsAsFactors = FALSE)
w16 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week16.txt', sep = ';',stringsAsFactors = FALSE)
w17 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week17.txt', sep = ';',stringsAsFactors = FALSE)
###################################################################################################################
#2016 stats########################################################################################################
w18 <- read.csv('Week1.txt', sep = ';',stringsAsFactors = FALSE)
w19 <- read.csv('Week2.txt', sep = ';',stringsAsFactors = FALSE)
###################################################################################################################
#append the tables on thh row
p <- data.table(rbind(w1,w2,w3,w4,w5,w6,w7,w8,w9,w10,w11,w12,w13,w14,w15,w16,w17,w18,w19))
#subset the player tables so it doesn't contain defensive data
p <- p[which(p$Name %like% "Defense" == FALSE)]
#read the multidimensional defense tables
#NFL stats page http://www.nfl.com/stats/team?seasonId=2015&seasonType=REG&Submit=Go
#Mergin tables######################################################################################################
#2015 run pass and total defense
runD15 <- data.table(read.csv('2015RunD.txt',sep = "\t"))
passD15 <- data.table(read.csv('2015PassD.txt',sep = "\t"))
totalD15 <- data.table(read.csv('2015TotalD.txt',sep ="\t"))
#merge 2015 stats to one table
runandpass2015 <- merge(runD15,passD15,by="Team")
runandpassandtotal2015 <- merge(runandpass2015 ,totalD15,by="Team")
runandpassandtotal2015[,"Year"] < 2015
#2016 run pass and total defense
runD16 <- data.table(read.csv('2016RunD.txt',sep = "\t"))
passD16 <- data.table(read.csv('2016PassD.txt',sep = "\t"))
totalD16 <- data.table(read.csv('2016TotalD.txt',sep ="\t"))
runandpassandtotal2015[,"Year"] < 2016
#merge 2015 stats to one table
runandpass2016 <- merge(runD16,passD16,by="Team")
runandpassandtotal2016 <- merge(runandpass2016 ,totalD16,by="Team")
#row bind
finalD <- rbind(runandpassandtotal2015,runandpassandtotal2016,fill=TRUE)
d <- finalD
#####################################################################################################################
#add team ID column names (to cbind using column IDs)
p[,"TeamID"] <- 0
d[,"TeamID"] <- 0
players <- AssignTeamIDs(p)
library(data.table)
source('FFfunctions.R')
#fanduel data http://rotoguru1.com/cgi-bin/fyday.pl?week=1&game=fd&scsv=1
#2015 stats
#read the player FFP tables######################################################################################
w1 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week1.txt', sep = ';',stringsAsFactors = FALSE)
w2 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week2.txt', sep = ';',stringsAsFactors = FALSE)
w3 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week3.txt', sep = ';',stringsAsFactors = FALSE)
w4 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week4.txt', sep = ';',stringsAsFactors = FALSE)
w5 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week5.txt', sep = ';',stringsAsFactors = FALSE)
w6 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week6.txt', sep = ';',stringsAsFactors = FALSE)
w7 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week7.txt', sep = ';',stringsAsFactors = FALSE)
w8 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week8.txt', sep = ';',stringsAsFactors = FALSE)
w9 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week9.txt', sep = ';',stringsAsFactors = FALSE)
w10 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week10.txt', sep = ';',stringsAsFactors = FALSE)
w11 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week11.txt', sep = ';',stringsAsFactors = FALSE)
w12 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week12.txt', sep = ';',stringsAsFactors = FALSE)
w13 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week13.txt', sep = ';',stringsAsFactors = FALSE)
w14 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week14.txt', sep = ';',stringsAsFactors = FALSE)
w15 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week15.txt', sep = ';',stringsAsFactors = FALSE)
w16 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week16.txt', sep = ';',stringsAsFactors = FALSE)
w17 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week17.txt', sep = ';',stringsAsFactors = FALSE)
###################################################################################################################
#2016 stats########################################################################################################
w18 <- read.csv('Week1.txt', sep = ';',stringsAsFactors = FALSE)
w19 <- read.csv('Week2.txt', sep = ';',stringsAsFactors = FALSE)
###################################################################################################################
#append the tables on thh row
p <- data.table(rbind(w1,w2,w3,w4,w5,w6,w7,w8,w9,w10,w11,w12,w13,w14,w15,w16,w17,w18,w19))
#subset the player tables so it doesn't contain defensive data
p <- p[which(p$Name %like% "Defense" == FALSE)]
#read the multidimensional defense tables
#NFL stats page http://www.nfl.com/stats/team?seasonId=2015&seasonType=REG&Submit=Go
#Mergin tables######################################################################################################
#2015 run pass and total defense
runD15 <- data.table(read.csv('2015RunD.txt',sep = "\t"))
passD15 <- data.table(read.csv('2015PassD.txt',sep = "\t"))
totalD15 <- data.table(read.csv('2015TotalD.txt',sep ="\t"))
#merge 2015 stats to one table
runandpass2015 <- merge(runD15,passD15,by="Team")
runandpassandtotal2015 <- merge(runandpass2015 ,totalD15,by="Team")
runandpassandtotal2015[,"Year"] <- 2015
#2016 run pass and total defense
runD16 <- data.table(read.csv('2016RunD.txt',sep = "\t"))
passD16 <- data.table(read.csv('2016PassD.txt',sep = "\t"))
totalD16 <- data.table(read.csv('2016TotalD.txt',sep ="\t"))
runandpassandtotal2015[,"Year"] <- 2016
#merge 2015 stats to one table
runandpass2016 <- merge(runD16,passD16,by="Team")
runandpassandtotal2016 <- merge(runandpass2016 ,totalD16,by="Team")
#row bind
finalD <- rbind(runandpassandtotal2015,runandpassandtotal2016,fill=TRUE)
d <- finalD
#####################################################################################################################
#add team ID column names (to cbind using column IDs)
p[,"TeamID"] <- 0
d[,"TeamID"] <- 0
players <- AssignTeamIDs(p)
defenses <- AssignTeamIDsDefense(d)
setkey(players,'TeamID')
setkey(defenses,'TeamID')
#join the tables on Team ID. Player and the opposing team
matrix = merge(players,defenses, by='TeamID',allow.cartesian = TRUE)
write.csv(matrix,'ffd2.csv')
#Experiment##########################################################################################################
path <- 'C:/Users/Owner/Source/Repos/R/FantasyFootball/Fanduel/FanDuel-NFL-2016-09-25-16403-players-list.csv'
t <- data.table(read.csv(path,stringsAsFactors = FALSE))
idData<- data.table(read.csv('RotoguruPlayerIds.csv',stringsAsFactors = FALSE))
input <- ConvertFanduelCSV(t,idData)
input[,"TeamID"] <- 0
experiment <- AssignTeamIDs(input)
setkey(experiment,'TeamID')
myexp <- merge(experiment,defenses, by='TeamID',allow.cartesian = TRUE)
write.csv(myexp,'week3exp.csv')
#####################################################################################################################
write.csv(myexp,'week3exp.csv')
write.csv(myexp,'week3exp.csv')
colnames(myexp)
colnames(matrix)
source('C:/Users/Owner/Source/Repos/R/FantasyFootball/FFfunctions.R')
str(myexp)
str(matrix)
install.packages("rgl")
library(Rglpk)
install.packages("Rglpk")
source('C:/Users/Owner/Source/Repos/R/FantasyFootball/FootballOptimizer.R')
data <- data.table(read.csv('Week3Predictions'))
data <- data.table(read.csv('Week3Predictions.csv'))
FootballOptimizer(data)
source('C:/Users/Owner/Source/Repos/R/FantasyFootball/FootballOptimizer.R')
RunOptimizer(data)
RunOptimizer(data)
debugSource('C:/Users/Owner/Source/Repos/R/FantasyFootball/FootballOptimizer.R')
RunOptimizer(data)
RunOptimizer(data)
debugSource('C:/Users/Owner/Source/Repos/R/FantasyFootball/FootballOptimizer.R')
RunOptimizer(data)
data
RunOptimizer(data)
debugSource('C:/Users/Owner/Source/Repos/R/FantasyFootball/FootballOptimizer.R')
RunOptimizer(data)
data
RunOptimizer(data)
RunOptimizer(data)
debugSource('C:/Users/Owner/Source/Repos/R/FantasyFootball/FootballOptimizer.R')
RunOptimizer(data)
debugSource('C:/Users/Owner/Source/Repos/R/FantasyFootball/FootballOptimizer.R')
RunOptimizer(data)
debugSource('C:/Users/Owner/Source/Repos/R/FantasyFootball/FootballOptimizer.R')
debugSource('C:/Users/Owner/Source/Repos/R/FantasyFootball/FootballOptimizer.R')
RunOptimizer(data)
debugSource('C:/Users/Owner/Source/Repos/R/FantasyFootball/FootballOptimizer.R')
RunOptimizer(data)
debugSource('C:/Users/Owner/Source/Repos/R/FantasyFootball/FootballOptimizer.R')
debugSource('C:/Users/Owner/Source/Repos/R/FantasyFootball/FootballOptimizer.R')
debugSource('C:/Users/Owner/Source/Repos/R/FantasyFootball/FootballOptimizer.R')
RunOptimizer(data)
debugSource('C:/Users/Owner/Source/Repos/R/FantasyFootball/FootballOptimizer.R')
RunOptimizer(data)
RunOptimizer(data)
num.players
debugSource('C:/Users/Owner/Source/Repos/R/FantasyFootball/FootballOptimizer.R')
RunOptimizer(data)
RunOptimizer(data)
source('C:/Users/Owner/Source/Repos/R/FantasyFootball/FootballOptimizer.R')
RunOptimizer(data)
source('C:/Users/Owner/Source/Repos/R/FantasyFootball/FootballOptimizer.R')
RunOptimizer(data)
source('C:/Users/Owner/Source/Repos/R/FantasyFootball/FootballOptimizer.R')
RunOptimizer(data)
debugSource('C:/Users/Owner/Source/Repos/R/FantasyFootball/FootballOptimizer.R')
RunOptimizer(data)
mat
matrix
RunOptimizer(data)
final$Pos
debugSource('C:/Users/Owner/Source/Repos/R/FantasyFootball/FootballOptimizer.R')
RunOptimizer(data)
sol
RunOptimizer(data)
sol
sol91
sol[1]
sol[2]
V iew(d)
View(d)
View(final)
sol[2]
View(d)
d <- data.table(cbind(sol[2],final))
View(d)
nrow(sol[2])
length(sol[2])
RunOptimizer(data)
View(d)
View(sol[2])
View(d)
View(final)
test <- cbind(final,sol[2])
View(test)
View(colnames(test))
colnames(test)
View(test[test$V2 != 0])
RunOptimizer(data)
RunOptimizer(data)
View(d)
test <- cbind(sol[2],final)
View(test)
View(final)
test <- data.table(cbind(sol[2],final))
View(test)
nrow(dol[2])
nrow(sol[2])
length(sol[2])
View(sol[2])
class(sol[2])
test <- data.table(sol[2])
View(tets)
View(test)
test <- unlist(sol[2])
View(test)
View(test[2])
View(sol[2])
test <- data.frame(sol[2])
View(test)
class(test)
test2 <- cbind(final,test)
View(test)
View(final)
View(test)
test3 <- cbind(test2,final)
View(test3)
colnames(test2)
colnames(test)
test <- data.table(sol[2])
colnames(tets)
colnames(test)
test
View(test)
test <- data.table(unlist(sol[2]))
View(test)
class(test)
test2 <- data.table(cbind(test,final))
View(test2)
source('C:/Users/Owner/Source/Repos/R/FantasyFootball/FootballOptimizer.R')
RunOptimizer(data)
RunOptimizer(data)
sum(l$FD.salary)
RunOptimizer(data)
RunOptimizer(data)
source('C:/Users/Owner/Source/Repos/R/FantasyFootball/FootballOptimizer.R')
RunOptimizer(data)
ffd <- data.table(read.csv('ffdata2.csv'))
myexp <- data.table(read.csv('week3exp.csv'))
library(data.table)
source('FFfunctions.R')
ffd <- data.table(read.csv('ffdata2.csv'))
myexp <- data.table(read.csv('week3exp.csv'))
ffd <- data.table(read.csv('ffd2.csv'))
myexp <- data.table(read.csv('week3exp.csv'))
View(ffd)
defenses
path <- 'C:/Users/Owner/Source/Repos/R/FantasyFootball/Fanduel/FanDuel-NFL-2016-09-22-16402-players-list.csv'
t <- data.table(read.csv(path,stringsAsFactors = FALSE))
idData<- data.table(read.csv('RotoguruPlayerIds.csv',stringsAsFactors = FALSE))
input <- ConvertFanduelCSV(t,idData)
input[,"TeamID"] <- 0
experiment <- AssignTeamIDs(input)
setkey(experiment,'TeamID')
myexp <- merge(experiment,defenses, by='TeamID',allow.cartesian = TRUE)
write.csv(myexp,'week3Thursexp.csv')
data <- data.table(read.csv('Week3ThursPrediction.csv'))
FootballOptimizer(data)
source('C:/Users/Owner/Source/Repos/R/FantasyFootball/FootballOptimizer.R')
source('FootballOptimizer.R')
data <- data.table(read.csv('Week3ThursPrediction.csv'))
FootballOptimizer(data)
source('C:/Users/Owner/Source/Repos/R/FantasyFootball/FootballOptimizer.R')
source('C:/Users/Owner/Source/Repos/R/FantasyFootball/FootballOptimizer.R')
source('C:/Users/Owner/Source/Repos/R/FantasyFootball/FootballOptimizer.R')
getwd()
data <- data.table(read.csv('Week3ThursPrediction.csv'))
FootballOptimizer(data)
source('FootballOptimizer.R')
library(data.table)
source('FFfunctions.R')
source('FootballOptimizer.R')
RunOptimizer(data)
path <- 'C:/Users/Owner/Source/Repos/R/FantasyFootball/Fanduel/FanDuel-NFL-2016-09-25-16404-players-list.csv'
t <- data.table(read.csv(path,stringsAsFactors = FALSE))
idData<- data.table(read.csv('RotoguruPlayerIds.csv',stringsAsFactors = FALSE))
input <- ConvertFanduelCSV(t,idData)
input[,"TeamID"] <- 0
experiment <- AssignTeamIDs(input)
setkey(experiment,'TeamID')
myexp <- merge(experiment,defenses, by='TeamID',allow.cartesian = TRUE)
write.csv(myexp,'week3Sun1PMexp.csv')
data <- data.table(read.csv('Week3Sun1PMPredictions.csv'))
RunOptimizer(data)
data <- data.table(read.csv('Week3ThursPrediction.csv'))
RunOptimizer(data)
source('C:/Users/Owner/Source/Repos/R/FantasyFootball/FFfunctions.R')
fit <- lm(data1$FD.points ~ data1$Rk.y + data1$Yds.x + data1$FD.salary + data1$TD.y + data1$TotPts.y, data=data1)
summary(fit) # show result
data1 <- data.table(read.csv('Week3Sun4PMOnlyPredictions.csv'))
fit <- lm(data1$FD.points ~ data1$Rk.y + data1$Yds.x + data1$FD.salary + data1$TD.y + data1$TotPts.y, data=data1)
summary(fit) # show result
library(data.table)
fit <- lm(data1$FD.points ~ data1$Rk.y + data1$Yds.x + data1$FD.salary + data1$TD.y + data1$TotPts.y, data=data1)
summary(fit) # show result
data1 <- data.table(read.csv('Week3Sun4PMOnlyPredictions.csv'))
fit <- lm(data1$FD.points ~ data1$Rk.y + data1$Yds.x + data1$FD.salary + data1$TD.y + data1$TotPts.y, data=data1)
summary(fit) # show result
fit <- lm(data1$Scored.Labels ~ data1$Rk.y + data1$Yds.x + data1$FD.salary + data1$TD.y + data1$TotPts.y, data=data1)
summary(fit) # show result
fit <- lm(data1$Scored.Labels ~ data1$Rk.y + data1$Yds.x + data1$FD.salary + data1$TD.y + data1$TotPts.y + data1$TD.x, data=data1)
summary(fit) # show result
View(data1)
fit <- lm(data1$Scored.Labels ~ data1$Rk.y + data1$Yds.x + data1$FD.salary + data1$TD.y + data1$TotPts.y + data1$TD.x + data1$3X3rd.Md, data=data1)
summary(fit) # show result
fit <- lm(data1$Scored.Labels ~ data1$Rk.y + data1$Yds.x + data1$FD.salary + data1$TD.y + data1$TotPts.y + data1$TD.x, data=data1)
summary(fit) # show result
fit <- lm(data1$Scored.Labels ~ data1$Rk.y + data1$Yds.x + data1$FD.salary + data1$TD.y + data1$TotPts.y + data1$TD.x + data1$3X3rd.Md, data=data1)
summary(fit) # show result
str(data1$3X3rd.Md)
str(data1
)
# Multiple Linear Regression Example
fit <- lm(data1$Scored.Labels ~ data1$Rk.y + data1$Yds.x + data1$FD.salary + data1$TD.y + data1$TotPts.y + data1$TD.x + data1$X3rd.Pct, data=data1)
summary(fit) # show result
str(data1)
# Multiple Linear Regression Example
fit <- lm(data1$FD.points ~ data1$Rk.y + data1$Yds.x + data1$FD.salary + data1$TD.y + data1$TotPts.y + data1$TD.x + data1$X3rd.Pct, data=data1)
summary(fit) # show result
fit <- lm(data1$Scored.Labels ~ data1$Rk.y + data1$Yds.x + data1$FD.salary + data1$TD.y + data1$TotPts.y + data1$TD.x + data1$X3rd.Pct, data=data1)
summary(fit) # show result
source('C:/Users/Owner/Source/Repos/R/FantasyFootball/WebScraping.R')
library(XML)
srts<-htmlParse("http://rotoguru1.com/cgi-bin/fyday.pl?week=2&game=fd")
class(srts)
srts.table<- readHTMLTable(srts,stringsAsFactors = FALSE)
strs[1]
strs.table[1]
d <- readHTMLTable(srts,stringsAsFactors = FALSE)
d[1]
View(d[1])
library(XML)
srts<-htmlParse("http://rotoguru1.com/cgi-bin/fyday.pl?week=2&game=fd&scsv=1")
class(srts)
d <- readHTMLTable(srts,stringsAsFactors = FALSE)
library(XML)
srts <-htmlParse("http://rotoguru1.com/cgi-bin/fyday.pl?week=2&game=fd")
class(srts)
d <- readHTMLTable(srts,stringsAsFactors = FALSE)
View(d[1])
w18 <- read.csv('Week1.txt', sep = ';',stringsAsFactors = FALSE)
View(w18)
View(d)
d <- readHTMLTable(srts,stringsAsFactors = FALSE)
View(d)
library(XML)
srts <-htmlParse("http://rotoguru1.com/cgi-bin/fyday.pl?week=2&game=fd")
class(srts)
d <- readHTMLTable(srts,stringsAsFactors = FALSE)
View(d)
View(d[1])
library(XML)
srts <-htmlParse("http://rotoguru1.com/cgi-bin/fyday.pl?week=2&game=fd&scsv=1")
class(srts)
d <- readHTMLTable(srts,stringsAsFactors = FALSE)
d1 <- read.csv(srts,stringsAsFactors = FALSE)
d <- readHTMLTable(srts,stringsAsFactors = FALSE)
source('C:/Users/Owner/Source/Repos/R/FantasyFootball/FFfunctions.R')
library(data.table)
source('FFfunctions.R')
source('FootballOptimizer.R')
#fanduel data http://rotoguru1.com/cgi-bin/fyday.pl?week=1&game=fd&scsv=1
#2015 stats
#read the player FFP tables######################################################################################
w1 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week1.txt', sep = ';',stringsAsFactors = FALSE)
w2 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week2.txt', sep = ';',stringsAsFactors = FALSE)
w3 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week3.txt', sep = ';',stringsAsFactors = FALSE)
w4 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week4.txt', sep = ';',stringsAsFactors = FALSE)
w5 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week5.txt', sep = ';',stringsAsFactors = FALSE)
w6 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week6.txt', sep = ';',stringsAsFactors = FALSE)
w7 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week7.txt', sep = ';',stringsAsFactors = FALSE)
w8 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week8.txt', sep = ';',stringsAsFactors = FALSE)
w9 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week9.txt', sep = ';',stringsAsFactors = FALSE)
w10 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week10.txt', sep = ';',stringsAsFactors = FALSE)
w11 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week11.txt', sep = ';',stringsAsFactors = FALSE)
w12 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week12.txt', sep = ';',stringsAsFactors = FALSE)
w13 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week13.txt', sep = ';',stringsAsFactors = FALSE)
w14 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week14.txt', sep = ';',stringsAsFactors = FALSE)
w15 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week15.txt', sep = ';',stringsAsFactors = FALSE)
w16 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week16.txt', sep = ';',stringsAsFactors = FALSE)
w17 <- read.csv('C:/Users/Owner/Source/Repos/R/FantasyFootball/2015/Week17.txt', sep = ';',stringsAsFactors = FALSE)
###################################################################################################################
#2016 stats########################################################################################################
w18 <- read.csv('Week1.txt', sep = ';',stringsAsFactors = FALSE)
w19 <- read.csv('Week2.txt', sep = ';',stringsAsFactors = FALSE)
###################################################################################################################
#append the tables on thh row
p <- data.table(rbind(w1,w2,w3,w4,w5,w6,w7,w8,w9,w10,w11,w12,w13,w14,w15,w16,w17,w18,w19))
#subset the player tables so it doesn't contain defensive data
p <- p[which(p$Name %like% "Defense" == FALSE)]
#read the multidimensional defense tables
#NFL stats page http://www.nfl.com/stats/team?seasonId=2015&seasonType=REG&Submit=Go
#Mergin tables######################################################################################################
#2015 run pass and total defense
runD15 <- data.table(read.csv('2015RunD.txt',sep = "\t"))
passD15 <- data.table(read.csv('2015PassD.txt',sep = "\t"))
totalD15 <- data.table(read.csv('2015TotalD.txt',sep ="\t"))
#merge 2015 stats to one table
runandpass2015 <- merge(runD15,passD15,by="Team")
runandpassandtotal2015 <- merge(runandpass2015 ,totalD15,by="Team")
runandpassandtotal2015[,"Year"] <- 2015
#2016 run pass and total defense
runD16 <- data.table(read.csv('2016RunD.txt',sep = "\t"))
passD16 <- data.table(read.csv('2016PassD.txt',sep = "\t"))
totalD16 <- data.table(read.csv('2016TotalD.txt',sep ="\t"))
runandpassandtotal2015[,"Year"] <- 2016
#merge 2015 stats to one table
runandpass2016 <- merge(runD16,passD16,by="Team")
runandpassandtotal2016 <- merge(runandpass2016 ,totalD16,by="Team")
#row bind
finalD <- rbind(runandpassandtotal2015,runandpassandtotal2016,fill=TRUE)
d <- finalD
#####################################################################################################################
#add team ID column names (to cbind using column IDs)
p[,"TeamID"] <- 0
d[,"TeamID"] <- 0
players <- AssignTeamIDs(p)
defenses <- AssignTeamIDsDefense(d)
setkey(players,'TeamID')
setkey(defenses,'TeamID')
#join the tables on Team ID. Player and the opposing team
matrix = merge(players,defenses, by='TeamID',allow.cartesian = TRUE)
write.csv(matrix,'ffd3.csv')
library(XML)
srts <-htmlParse("http://rotoguru1.com/cgi-bin/fyday.pl?week=2&game=fd&scsv=0")
class(srts)
d <- readHTMLTable(srts,stringsAsFactors = FALSE)
d1 <- read.csv(srts,stringsAsFactors = FALSE)
View(d[1])
srts <-htmlParse("http://rotoguru1.com/cgi-bin/fyday.pl?week=2&game=fd&scsv=1")
class(srts)
d <- readHTMLTable(srts,stringsAsFactors = FALSE)
d1 <- read.csv(srts,stringsAsFactors = FALSE)
d <- readHTMLList(srts,stringsAsFactors = FALSE)
d <- readHTMLTable(srts,stringsAsFactors = FALSE)
library(RCurl)
d <- readHTMLTable(srts,stringsAsFactors = FALSE)
library(RCurl)
# load packages
library(RCurl)
library(XML)
# assign input (could be a html file, a URL, html text, or some combination of all three is the form of a vector)
input <- "http://www.google.co.uk/search?gcx=c&sourceid=chrome&ie=UTF-8&q=r+project#pq=%22hello+%3C+world%22&hl=en&cp=5&gs_id=3r&xhr=t&q=phd+comics&pf=p&sclient=psy-ab&source=hp&pbx=1&oq=phd+c&aq=0&aqi=g4&aql=&gs_sm=&gs_upl=&bav=on.2,or.r_gc.r_pw.r_cp.,cf.osb&fp=27ff09b2758eb4df&biw=1599&bih=904"
# evaluate input and convert to text
txt <- htmlToText(input)
txt
txt <- htmlToText(input)
source('C:/Users/Owner/Source/Repos/R/FantasyFootball/WebScraping.R', encoding = 'UTF-8')
srts <-htmlParse("http://rotoguru1.com/cgi-bin/fyday.pl?week=2&game=fd&scsv=0")
class(srts)
source('C:/Users/Owner/Source/Repos/R/FantasyFootball/WebScraping.R', encoding = 'UTF-8')
source('C:/Users/Owner/Source/Repos/R/FantasyFootball/WebScraping.R', encoding = 'UTF-8')
t <- htmltoText(d)
source('C:/Users/Owner/Source/Repos/R/FantasyFootball/WebScraping.R', encoding = 'UTF-8')
t
t <- htmltoText(d)
