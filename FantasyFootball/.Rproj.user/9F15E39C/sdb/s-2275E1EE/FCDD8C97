{
    "collab_server" : "",
    "contents" : "library(data.table)\n\n\n\n\n#Functions#####################################################\nAssignTeamIDs <- function(t){\n  #add team ID column names (to cbind using column IDs)\n  \n  for(i in 1:nrow(t)){\n    if(t[i]$Team == 'Arizona Cardinals' || t[i]$Oppt == 'ari'){\n      t[i]$TeamID <- 1\n    }\n    if(t[i]$Team == 'Atlanta Falcons' || t[i]$Oppt == 'atl'){\n      t[i]$TeamID <- 2\n    }\n    if(t[i]$Team == 'Baltimore Ravens' || t[i]$Oppt== 'bal'){\n      t[i]$TeamID <- 3\n    }\n    if(t[i]$Team == 'Buffalo Bills' || t[i]$Oppt == 'buf'){\n      t[i]$TeamID <- 4\n    }\n    if(t[i]$Team == 'Carolina Panthers' || t[i]$Oppt == 'car'){\n      t[i]$TeamID <- 5\n    }\n    if(t[i]$Team == 'Chicago Bears' || t[i]$Oppt == 'chi'){\n      t[i]$TeamID <- 6\n    }\n    if(t[i]$Team == 'Cincinnati Bengals' || t[i]$Oppt == 'cin'){\n      t[i]$TeamID <- 7\n    }\n    if(t[i]$Team == 'Clevland Browns' || t[i]$Oppt == 'cle'){\n      t[i]$TeamID <- 8\n    }\n    if(t[i]$Team == 'Dallas Cowboys' || t[i]$Oppt == 'dal'){\n      t[i]$TeamID <- 9\n    }\n    if(t[i]$Team == 'Denver Broncos' || t[i]$Oppt == 'den'){\n      t[i]$TeamID <- 10\n    }\n    if(t[i]$Team == 'Detroit Lions' || t[i]$Oppt == 'det'){\n      t[i]$TeamID <- 11\n    }\n    if(t[i]$Team == 'Green Bay Packers' || t[i]$Oppt == 'gnb'){\n      t[i]$TeamID <- 12\n    }\n    if(t[i]$Team == 'Houston Texans' || t[i]$Oppt == 'hou'){\n      t[i]$TeamID <- 13\n    }\n    ###TODO\n    if(t[i]$Team == 'Indianapolis Colts' || t[i]$Oppt == 'ind'){\n      t[i]$TeamID <- 14\n    }\n    if(t[i]$Team == 'Jacksonville Jaguars' || t[i]$Oppt == 'jac'){\n      t[i]$TeamID <- 15\n    }\n    if(t[i]$Team == 'Kansas City Chiefs' || t[i]$Oppt == 'kan'){\n      t[i]$TeamID <- 16\n    }\n    \n    # thre rest\n    if(t[i]$Team == 'Los Angeles Rams' || t[i]$Oppt == 'lar'){\n      t[i]$TeamID <- 17\n    }\n    if(t[i]$Team == 'Miami Dolphins' || t[i]$Oppt == 'mia'){\n      t[i]$TeamID <- 18\n    }\n    if(t[i]$Team == 'Minnesota Vikings' || t[i]$Oppt== 'min'){\n      t[i]$TeamID <- 19\n    }\n    if(t[i]$Team == 'New England Patriots' || t[i]$Oppt == 'nwe'){\n      t[i]$TeamID <- 20\n    }\n    if(t[i]$Team == 'New Orleans Saints' || t[i]$Oppt == 'nor'){\n      t[i]$TeamID <- 21\n    }\n    if(t[i]$Team == 'New York Giants' || t[i]$Oppt == 'nyg'){\n      t[i]$TeamID <- 22\n    }\n    if(t[i]$Team == 'New York Jets' || t[i]$Oppt == 'nyj'){\n      t[i]$TeamID <- 23\n    }\n    if(t[i]$Team == 'Oakland Raiders' || t[i]$Oppt == 'oak'){\n      t[i]$TeamID <- 24\n    }\n    ###\n    if(t[i]$Team == 'Philadelphia Eagles' || t[i]$Oppt == 'phi'){\n      t[i]$TeamID <- 25\n    }\n    if(t[i]$Team == 'Pittsburgh Steelers' || t[i]$Oppt == 'pit'){\n      t[i]$TeamID <- 26\n    }\n    if(t[i]$Team == 'San Diego Chargers' || t[i]$Oppt == 'sdg'){\n      t[i]$TeamID <- 27\n    }\n    if(t[i]$Team == 'San Francisco 49ers' || t[i]$Oppt == 'sfo'){\n      t[i]$TeamID <- 28\n    }\n    if(t[i]$Team == 'Seattle Seahawks' || t[i]$Oppt == 'sea'){\n      t[i]$TeamID <- 29\n    }\n    ###TODO\n    if(t[i]$Team == 'Tampa Bay Buccaneers' || t[i]$Oppt == 'tam'){\n      t[i]$TeamID <- 30\n    }\n    if(t[i]$Team == 'Tennessee Titans' || t[i]$Oppt == 'ten'){\n      t[i]$TeamID <- 31\n    }\n    if(t[i]$Team == 'Washington Redskins' || t[i]$Oppt == 'was'){\n      t[i]$TeamID <- 32\n    }\n  }\n  return (t)\n}\n\nAssignTeamIDsDefense <- function(t){\n  #add team ID column names (to cbind using column IDs)\n  \n  for(i in 1:nrow(t)){\n    if(t[i]$Team == 'Arizona Cardinals'){\n      t[i]$TeamID <- 1\n    }\n    if(t[i]$Team == 'Atlanta Falcons'){\n      t[i]$TeamID <- 2\n    }\n    if(t[i]$Team == 'Baltimore Ravens'){\n      t[i]$TeamID <- 3\n    }\n    if(t[i]$Team == 'Buffalo Bills'){\n      t[i]$TeamID <- 4\n    }\n    if(t[i]$Team == 'Carolina Panthers'){\n      t[i]$TeamID <- 5\n    }\n    if(t[i]$Team == 'Chicago Bears'){\n      t[i]$TeamID <- 6\n    }\n    if(t[i]$Team == 'Cincinnati Bengals'){\n      t[i]$TeamID <- 7\n    }\n    if(t[i]$Team == 'Clevland Browns'){\n      t[i]$TeamID <- 8\n    }\n    if(t[i]$Team == 'Dallas Cowboys'){\n      t[i]$TeamID <- 9\n    }\n    if(t[i]$Team == 'Denver Broncos'){\n      t[i]$TeamID <- 10\n    }\n    if(t[i]$Team == 'Detroit Lions'){\n      t[i]$TeamID <- 11\n    }\n    if(t[i]$Team == 'Green Bay Packers'){\n      t[i]$TeamID <- 12\n    }\n    if(t[i]$Team == 'Houston Texans'){\n      t[i]$TeamID <- 13\n    }\n    ###TODO\n    if(t[i]$Team == 'Indianapolis Colts'){\n      t[i]$TeamID <- 14\n    }\n    if(t[i]$Team == 'Jacksonville Jaguars'){\n      t[i]$TeamID <- 15\n    }\n    if(t[i]$Team == 'Kansas City Chiefs'){\n      t[i]$TeamID <- 16\n    }\n    \n    if(t[i]$Team == 'Los Angeles Rams'){\n      t[i]$TeamID <- 17\n    }\n    if(t[i]$Team == 'Miami Dolphins'){\n      t[i]$TeamID <- 18\n    }\n    if(t[i]$Team == 'Minnesota Vikings'){\n      t[i]$TeamID <- 19\n    }\n    if(t[i]$Team == 'New England Patriots'){\n      t[i]$TeamID <- 20\n    }\n    if(t[i]$Team == 'New Orleans Saints'){\n      t[i]$TeamID <- 21\n    }\n    if(t[i]$Team == 'New York Giants'){\n      t[i]$TeamID <- 22\n    }\n    if(t[i]$Team == 'New York Jets'){\n      t[i]$TeamID <- 23\n    }\n    if(t[i]$Team == 'Oakland Raiders'){\n      t[i]$TeamID <- 24\n    }\n    ###\n    if(t[i]$Team == 'Philadelphia Eagles'){\n      t[i]$TeamID <- 25\n    }\n    if(t[i]$Team == 'Pittsburgh Steelers'){\n      t[i]$TeamID <- 26\n    }\n    if(t[i]$Team == 'San Diego Chargers'){\n      t[i]$TeamID <- 27\n    }\n    if(t[i]$Team == 'San Francisco 49ers'){\n      t[i]$TeamID <- 28\n    }\n    if(t[i]$Team == 'Seattle Seahawks'){\n      t[i]$TeamID <- 29\n    }\n    ###TODO\n    if(t[i]$Team == 'Tampa Bay Buccaneers'){\n      t[i]$TeamID <- 30\n    }\n    if(t[i]$Team == 'Tennessee Titans'){\n      t[i]$TeamID <- 31\n    }\n    if(t[i]$Team == 'Washington Redskins'){\n      t[i]$TeamID <- 32\n    }\n  }\n  return (t)\n}\n\nConvertFanduelCSV <- function(t,id){\n  \n  \n  tmpDataTable <- data.table(\n    Week = integer(),\n    Year = integer(),\n    GID = integer(),\n    Name = character(),  \n    Pos = character(),\n    Team = character(),\n    h.a = character(),\n    Oppt = character(),\n    FD.points = numeric(),\n    FD.salary = integer())\n  \n  for(i in 1:nrow(t)){\n    \n    n <- paste0(t[i]$Last.Name,', ',t[i]$First.Name)\n    key <- id[which(id$Name == n)]$ID\n    \n    if(length(key) > 0){\n      tmpDataTable <- rbind(tmpDataTable,data.table(\n        Week = 3,\n        Year = 2016,\n        Name = n,\n        GID = key,\n        Pos = t[i]$Position,\n        Team = t[i]$Team,\n        h.a = 't',\n        Oppt = tolower(t[i]$Opponent),\n        FD.points = t[i]$FPPG,\n        FD.salary = t[i]$Salary\n      ))\n    }\n  \n  }\n  \n  return (tmpDataTable)\n  \n}\n\nRunOptimizer <- function(x)\n{\n  library(Rglpk)\n  library(data.table)\n  \n  final <- x\n  num.players = length(final$GID)\n  \n  #final <- d[which(d$Injury.Indicator != 'O'),]\n  \n  \n  #final <- read.csv('FanDuel-NFL-2016-09-19-16371-players-list.csv')\n  \n  # objective:\n  obj <- final$Scored.Labels\n  # the vars are represented as booleans\n  var.types <- rep(\"B\", num.players)\n  # the constraints\n  matrix <- rbind(\n    as.numeric(final$Pos == \"QB\"), # num QB\n    as.numeric(final$Pos == \"RB\"), # num RB\n    as.numeric(final$Pos == \"WR\"), # num WR\n    as.numeric(final$Pos == \"TE\"), # num TE\n    as.numeric(final$Pos == \"K\"),  # num K\n    #as.numeric(final$Position == \"D\"),  # num DE\n    final$FD.salary\n  )                       # total cost\n  direction <- c(\"==\",\n                 \"==\",\n                 \"==\",\n                 \"==\",\n                 \"==\",\n                 #\"==\",\n                 \"<=\")\n  rhs <- c(1, # Quartbacks\n           2, # RB Min\n           3, # WR Min\n           1, # TE Min\n           1, # K Max\n           #1, # Defense\n           55000)                # By default, you get 60K to spend, so leave this number alone. but save 5k for a defense\n  \n  sol <-\n    Rglpk_solve_LP(\n      obj = obj, mat = matrix, dir = direction, rhs = rhs,\n      types = var.types, max = TRUE\n    )\n  \n  opt <- data.table(unlist(sol[2]))\n  \n  d <- data.table(cbind(opt,final))\n  \n  l <- d[d$V1 != 0]\n  View(l)\n  return (l)\n}\n###############################################################\n",
    "created" : 1474472732673.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "6|29|113|0|\n115|36|221|0|\n223|36|262|0|\n",
    "hash" : "1008884974",
    "id" : "FCDD8C97",
    "lastKnownWriteTime" : 1474594428,
    "last_content_update" : 1474594428852,
    "path" : "C:/Users/Owner/Source/Repos/R/FantasyFootball/FFfunctions.R",
    "project_path" : "FFfunctions.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 6,
    "source_on_save" : true,
    "source_window" : "",
    "type" : "r_source"
}